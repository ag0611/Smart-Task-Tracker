<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Task Tracker</title>
  <link rel="stylesheet" href="css/style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="container">

  <!-- Sidebar -->
  <aside class="sidebar">
    <h2>Smart Task</h2>
   <ul>
  <li class="active" onclick="showSection('dashboard')">Dashboard</li>
  <li onclick="showSection('tasks')">Tasks</li>
  <li onclick="showSection('month')">Month</li>
  <li onclick="showSection('analytics')">Analytics</li>
</ul>

  </aside>

  <!-- Main Content -->
  <main class="main">

    <!-- Top Bar -->
    <div class="topbar">
      <h1>Dashboard</h1>
      <span class="date">Feb 2026</span>
    </div>

    <!-- Stats Cards -->
<section class="cards" id="dashboard">
  <div class="card">
    Total Tasks<br>
    <strong id="totalTasks">0</strong>
  </div>

  <div class="card">
    Completed<br>
    <strong id="completedTasks">0</strong>
  </div>

  <div class="card">
    Pending<br>
    <strong id="pendingTasks">0</strong>
  </div>
</section>


   <!-- Task Input -->
<section class="task-input" id="tasks">
  <input type="text" placeholder="Enter new task">
  <input type="date">
  <button onclick="addTask()">Add Task</button>
</section>

<section class="task-list" id="taskList">
  <!-- Tasks will appear here -->
</section>


<select id="monthSelect">
  <option value="0">January</option>
  <option value="1">February</option>
  <option value="2">March</option>
  <option value="3">April</option>
  <option value="4">May</option>
  <option value="5">June</option>
  <option value="6">July</option>
  <option value="7">August</option>
  <option value="8">September</option>
  <option value="9">October</option>
  <option value="10">November</option>
  <option value="11">December</option>
</select>

    <!-- Month Blocks -->
<section class="month-view" id="month">
<h3 id="monthTitle">Month Overview</h3>
  <div class="month-grid" id="monthGrid">
    <!-- days will be generated by JS -->
  </div>
</section>


    <!-- Analytics Placeholder -->
<section class="analytics" id="analytics">
  <div class="chart">
    <canvas id="pieChart"></canvas>
  </div>
  <div class="chart">
    <canvas id="barChart"></canvas>
  </div>
</section>


  </main>
</div>
<script>
  function showSection(id) {
    const sections = ['dashboard', 'tasks', 'month', 'analytics'];

    sections.forEach(sec => {
      document.getElementById(sec).style.display = 'none';
    });

    document.getElementById(id).style.display = 'block';

    // active class toggle
    document.querySelectorAll('.sidebar li').forEach(li => {
      li.classList.remove('active');
    });
if (event && event.target) {
  event.target.classList.add('active');
}
  }

  // default section
  showSection('dashboard');
</script>
<script>
  // Pie Chart
  const pieCtx = document.getElementById('pieChart');
  const pieChart = new Chart(pieCtx, {
  type: 'pie',
  data: {
    labels: ['Completed', 'Pending'],
    datasets: [{
      data: [0, 0],
      backgroundColor: ['#22c55e', '#ef4444']
    }]
  }
});
  // Bar Chart
  const barCtx = document.getElementById('barChart');
  const barChart = new Chart(barCtx, {
  type: 'bar',
  data: {
    labels: [],
    datasets: [{
      label: 'Tasks Completed',
      data: [],
      backgroundColor: '#2563eb'
    }]
  },
  options: {
    scales: { y: { beginAtZero: true } }
  }
});
  function updateCharts() {
  const completed = tasks.filter(t => t.completed).length;
  const pending = tasks.length - completed;

  // Update Pie Chart
  pieChart.data.datasets[0].data = [completed, pending];
  pieChart.update();

  // Bar chart: count per day
  const dayMap = {};
  tasks.forEach(t => {
    if (t.completed) {
      dayMap[t.date] = (dayMap[t.date] || 0) + 1;
    }
  });

  barChart.data.labels = Object.keys(dayMap);
  barChart.data.datasets[0].data = Object.values(dayMap);
  barChart.update();
}

</script>
<script>
  let selectedMonth = new Date().getMonth();

  const taskInput = document.querySelector('.task-input input[type="text"]');
  const dateInput = document.querySelector('.task-input input[type="date"]');
  const taskList = document.getElementById('taskList');

  // Load saved tasks
  let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

  function updateDashboard() {
  const total = tasks.length;
  const completed = tasks.filter(t => t.completed).length;
  const pending = total - completed;

  document.getElementById('totalTasks').innerText = total;
  document.getElementById('completedTasks').innerText = completed;
  document.getElementById('pendingTasks').innerText = pending;
}


  function renderTasks() {
    taskList.innerHTML = '';
    tasks.forEach((task, index) => {
      const div = document.createElement('div');
      div.className = 'task-item';
      div.innerHTML = `
        <span>${task.text} (${task.date})</span>
${task.completed 
  ? '<span style="color:#22c55e;">âœ” Done</span>' 
  : `<button onclick="completeTask(${index})">Done</button>`
}
      `;
      taskList.appendChild(div);
    });
  }

  function addTask() {
    if (taskInput.value === '') return;

   tasks.push({
  text: taskInput.value,
  date: dateInput.value || 'No date',
  completed: false
});


    localStorage.setItem('tasks', JSON.stringify(tasks));
    taskInput.value = '';
   renderTasks();
   updateCharts();
   updateMonthView();
updateDashboard();


  }

  function completeTask(index) {
  tasks[index].completed = true;
  localStorage.setItem('tasks', JSON.stringify(tasks));
  renderTasks();
  updateCharts();
  updateMonthView();
updateDashboard();

}


  

  // Initial render
  renderTasks();
  updateCharts();
  updateMonthView();
  updateDashboard();

  const monthSelect = document.getElementById('monthSelect');
monthSelect.value = selectedMonth;

monthSelect.addEventListener('change', function () {
  selectedMonth = parseInt(this.value);
  updateMonthView();
});


function updateMonthView() {
  const monthGrid = document.getElementById('monthGrid');
  const monthTitle = document.getElementById('monthTitle');

  monthGrid.innerHTML = '';

  // current month & year
 const currentMonth = selectedMonth;
const currentYear = new Date().getFullYear();


  const monthNames = [
    'January','February','March','April','May','June',
    'July','August','September','October','November','December'
  ];

  monthTitle.innerText = `${monthNames[currentMonth]} Overview`;

  const dayData = {};

  tasks.forEach(task => {
    if (!task.date || task.date === 'No date') return;

    const taskDate = new Date(task.date);

    // ðŸš¨ FILTER BY MONTH + YEAR
    if (
      taskDate.getMonth() !== currentMonth ||
      taskDate.getFullYear() !== currentYear
    ) return;

    const dateKey = task.date;

    if (!dayData[dateKey]) {
      dayData[dateKey] = { done: 0, pending: 0 };
    }

    if (task.completed) {
      dayData[dateKey].done++;
    } else {
      dayData[dateKey].pending++;
    }
  });

  Object.keys(dayData).forEach(date => {
    const dayDiv = document.createElement('div');
    dayDiv.className = 'day';

    const dayNum = new Date(date).getDate();

    dayDiv.innerHTML = `
      <strong>${dayNum}</strong><br>
      <small>${dayData[date].done} done</small><br>
      <small>${dayData[date].pending} pending</small>
    `;

    monthGrid.appendChild(dayDiv);
  });
}


</script>


</body>
</html>
